/*
 * This Kotlin source file was generated by the Gradle 'init' task.
 */
package com.eria.application.main


import com.eria.http.HttpServer
import com.eria.http.MethodType
import com.eria.http.Response
import java.net.InetAddress


fun main(args: Array<String>) {
    val port = 80

    HttpServer.addRouting("/", MethodType.GET) {
        Response().apply {
            this.cookie["myCookie"] = "Eria"//設定cookie
            body = "Hello World " + it.cookie["myCookie"]//取得cookie
        }
    }

    HttpServer.addRouting("/{name}", MethodType.GET) {//動態路徑 ex /Eria 那 it.routeParameters["name"] 就會取出 Eria
        Response().apply { body = "Hello "+it.routeParameters["name"] }
    }

    HttpServer.star(port)

    var addr = InetAddress.getLocalHost()
    println("Local HostAddress: ${addr.hostAddress}")
    println("port: $port")
}


